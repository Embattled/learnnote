# Portable Batch System - PBS

PBS是一个公开源代码的作业管理系统，在此环境下运行，用户不需要指定程序在哪些节点上运行，程序所需的硬件资源由PBS管理和分配.  
PBS 被用于 集群系统,超算和大规模并行系统  

具有的特性: 
* 易用性：为所有的资源提供统一的接口，易于配置以满足不同系统的需求，灵活的作业调度器允许不同系统采用自己的调度策略。
* 移植性：符合POSIX 1003.2标准，可以用于shell和批处理等各种环境。
* 适配性：可以适配与各种管理策略，并提供可扩展的认证和安全模型。支持广域网上的负载的动态分发和建立在多个物理位置不同的实体上的虚拟组织。
* 灵活性：支持交互和批处理作业。


## PBS 命令

注: pbs命令一般都会写在脚本中进行提交  
 
总共有4条命令用来进行作业管理, 最基础
1. qsub 用于提交作业脚本
2. qstat 用于查询作业状态信息
3. qdel 用于删除已提交的作业
4. qmgr 用于队列管理  

### qsub 提交

`qsub  aaa.pbs`     提交某作业，系统将产生一个作业号  


### qstat 查询作业状态信息

`qatat [-f][-a][-i] [-n][-s] [-R] [-Q][-q][-B][-u] `
-f  jobid  列出指定作业的信息

-a         列出系统所有作业

-i         列出不在运行的作业

-n         列出分配给此作业的结点

-s         列出队列管理员与scheduler所提供的建议

-R          列出磁盘预留信息

-Q         操作符是destination id，指明请求的是队列状态  

-q         列出队列状态，并以alternative形式显示

-au userid 列出指定用户的所有作业

-B         列出PBS Server信息

-r         列出所有正在运行的作业

-Qf queue  列出指定队列的信息

-u         若操作符为作业号，则列出其状态。若操作符为destination id，则列出运行在其上的属于user_list中用户的作业状态。 


### qdel 删除作业

`qdel  [-W 间隔时间] 作业号`

例:  
`qdel -W 15 211 `   15秒后删除作业号为211的作业  

### qmgr 队列管理  



## PBS 脚本

PBS脚本文件由脚本选项和运行脚本两部分组成

### 脚本作业选项

用于指定PBS作业的设定, 以 `#PBS [选项]` 的格式存在  

-q  destination     ： destination有三种形式： queue , @server,queue@server
