# 1. vi


## 1.1. 基础操作

vi有三种模式

* 命令行模式 command mode  按`ESC` 从插入模式返回命令模式
* 插入模式 insert mode  
* 底行模式 last line mode 输入 `:` 在最下面一行键入命令,一般也算作命令模式  

在命令行模式下  
`:wq` 保存并退出  
`:w filename` 将该文件以指定的文件名另存为  
`:q!` 不存盘强制退出  


帮助手册:
* `:help  ??` 是 vi 内部的帮助手册调用
* 例如 `:help :quit`, 可以查到 `:q` 其实是 `:quit` 的缩写
* `:help :help` 查看帮助本身的说明, 可以看到 `:h` 则是 help 的缩写调用


## 1.2. 七种模式

调用 `:h Normal` 可以显示普通模式下的说明, 同时调用出其他所有模式的说明


在 vi 下有 **7** 种基础模式, 以及对应的复合模式, 也是 7 种

* Insert : 最普通的输入模式, 但是在打开 vi/vim 的时候一开始并不是这个模式
* Normal : 可以输入 normal editor commands, 该模式一般被理解成 commands 模式
* Visual : 理解为复选模式, 此时移动命令会建立高亮区域, 而非移动命令则会对高亮区域进行执行
* Select : 类似于 Windows 选择了一段文字(高亮)的状态, 此时输入任意字符则会删除高亮区域的文字并键入新输入的字符. vi 中同时还会一并进入 Insert 模式
* Command-line  : 单命令执行模式, 执行完后返回 Normal, 根据起始符号的不同有不同的分类
  * `:` 执行单命令
  * `?` `/` 执行搜索命令
  * `!` 执行 filter 命令
* Ex            : 多命令执行模式
* Terminal-Job  : 与终端进行交互

* showmode : 是 vi 的一个配置选项, 能够在 Visual 或者 Select 模式的时候在最底部显示对应的模式名称


## 1.5. Insert

键入模式, 最简单的模式, 只需要区分 插入和修改 两种键入模式即可

返回 Normal 模式:
* Ctrl + C
* ESC


## 1.3. Normal 

包括操作光标的命令, 需要记住用于编辑的快捷键, 此外一些 command-line 也有直接在 Normal 模式下的快捷键

### 1.3.1. 键盘命令

Normal 模式下几乎所有键盘字符都有作用, 甚至字母的大写小写的功能也是分开的  
小写字母 g 是用于复合命令, 按下之后会等待输入下一个键盘命令


* 光标移动命令
  * h j k l : 基础光标移动 左下上右
  * w b     : 单词词头移动命令, w 后一个单词的词头, b 前一个单词的词头
  * e ge    : 单词词尾移动命令, e 后一个单词的词头, ge 前一个单词的词头
  * W B E   : 大词跳转, 对应的是只有空格, 制表符等是分割单词的符号 
  * `- +`   : 成行移动光标, 减号移动到前一行行首, 加号移动到后一行行首
  * 0 $     : 0 是移动到行的第一个字符,  $ 移动到行尾
  * ^ g_    : 行首尾移动的非空白字符版本, ^ 移动到行首非空白字符, g_ 移动到行尾非空白字符
  * f F     : 行内查找, f 是正向, F 是反向, 因为是行内所以只能有单字符作为查找关键字
    * 开始查找后 ; 跳转到顺方向的下一个匹配, `,` 逗号跳转到逆方向的下一个匹配
* 进入插入模式
  * i       : 光标当前位置插入
  * I       : 光标当前行的行首插入
  * a       : 在光标的下一个位置键入文字
  * A       : 光标当前行的行尾插入
  * o       : 下方新开一行, 光标在行首
  * O       : 上方新开一行, 光标在行首
  
  * r       : 单文字修改, 修改完后返回 Normal 模式
  * R       : 多文字修改, 直到 ESC 返回 Normal 模式
* 编辑命令
  * .       : 点号, 重复上次进入 Insert 模式到返回 Normal 中间的全部操作, 可用于快速重复语句
  * u       : 撤销
  * Ctrl+r  : 重做
  * U       : 按一次撤销,按两次则取消撤销
` x ` 删除光标位置的字符  
` X ` 删除光标位置前面的字符  
` dd ` 删除光标位置的整行

` #x ` 删除光标位置的字符 `#` 个字符  
` #x ` 删除光标位置前面的字符`#`个字符  
` #x ` 从光标位置删除`#`行  
* count 命令 : 1~9 的数字键都是 count命令, 和基础命令组合用于成倍的执行
  * 

#### 1.3.1.1. a.操纵光标

` 数字0 ` 光标跳到文章开头
`Ctrl + g` 列出光标当前的行号  
` G ` 光标跳到文章末尾 
` #G` 光标跳到指定的行  

整页跳转浏览:  
`Ctrl + b` 屏幕往后/上移动一页 back  
`Ctrl + f` 屏幕往前/下移动一页 forward  
`Ctrl + u` 屏幕往后/上移动半页 up  
`Ctrl + d` 屏幕往前/下移动一页 down  

文字与行跳转:  

` #l ` 光标跳到所在行的第`#`个位置  




#### 1.3.1.3.  文字复制与粘贴

` yw ` 复制光标到字尾的字符到缓冲区  
` #yw ` 复制光标开始的`#`个字符到缓冲区  
` yy ` 复制光标整行字符到缓冲区  
` #yy ` 复制光标开始的`#`行字符到缓冲区  

`p` 粘贴  

### 1.3.2. 快捷键

* ctrl+G        : 查看文件信息, 相当于 `:f`
* ctrl+`[]`     : 光标移动到超链接的时候可以用于跳转, ] 跳入, [ 跳出
* 

## 1.4. Command-line

命令行模式. 需要记住一些操作 vi 的整体命令  
Normal模式下,键入 `:` 再输入后面的命令进行操作  

基础命令, 省略 `:`
* `q[uit]`      : 退出
* `f[ile]`      : 查看当前文件的详细信息
* `w[rite]`     : 保存当前文件
* `sav[eas]`    : 另存为     






## 1.6. last line 模式  


`set nu` 再每一行前面列出行号  

` /关键字 ` 向后查找  
` ?关键字 ` 向前查找  
按` n `可以继续寻找下一个,直到需要的关键字  


# 2. vim

vim 是基于 vi 改进过来的, 相同的部分不在赘述

